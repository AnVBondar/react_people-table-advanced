(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){"use strict";c.r(t);var s=c(26),a=(c(35),c(36),c(6)),r=c(3),n=c(5),i=c(10),l=c.n(i),o=c(1),j=function(e){var t=e.isActive;return l()("navbar-item",{"has-background-grey-lighter":t})},d=function(){var e=Object(a.d)(),t=Object(n.a)(e,1)[0];return Object(o.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"navbar-brand",children:[Object(o.jsx)(a.c,{to:"/",className:j,children:"Home"}),Object(o.jsx)(a.c,{to:{pathname:"/people",search:t.toString()},className:j,children:"People"})]})})})},b=(c(38),function(){return Object(o.jsxs)("div",{"data-cy":"app",children:[Object(o.jsx)(d,{}),Object(o.jsx)("div",{className:"section",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)(r.b,{})})})]})}),h=c(9),u=c(4),x=c(24),O=c(7),m=c(0),p=c.n(m),f="https://mate-academy.github.io/react_people-table/api/people.json";function v(e){return new Promise((function(t){return setTimeout(t,e)}))}function g(){return N.apply(this,arguments)}function N(){return(N=Object(O.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(500).then((function(){return fetch(f)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w="All",y="Male",S="Female",P=p.a.createContext({filteredPeople:[],errorMessage:"",isLoading:!1,setPeopleList:function(){},isPeopleEmpty:!1}),L=function(e){var t,c=e.children,s=Object(m.useState)([]),i=Object(n.a)(s,2),l=i[0],j=i[1],d=Object(m.useState)(""),b=Object(n.a)(d,2),p=b[0],f=b[1],v=Object(m.useState)(!1),N=Object(n.a)(v,2),y=N[0],S=N[1],L=Object(m.useState)(!1),k=Object(n.a)(L,2),C=k[0],F=k[1],M=Object(r.n)().pathname,A=Object(a.d)(),E=Object(n.a)(A,1)[0],R=E.get("sex")||w,q=(null===(t=E.get("query"))||void 0===t?void 0:t.toLocaleLowerCase())||"",T=E.getAll("centuries")||[];Object(m.useEffect)((function(){"/people"===M&&Object(O.a)(Object(u.a)().mark((function e(){var t,c;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,g();case 4:if((t=e.sent).length){e.next=9;break}return S(!1),F(!0),e.abrupt("return");case 9:c=t.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{mother:t.find((function(t){return e.motherName===t.name}))||null,father:t.find((function(t){return e.fatherName===t.name}))||null})})),j(c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),f("Something went wrong");case 16:return e.prev=16,S(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})))()}),[M]);var U={filteredPeople:function(){var e=[];switch(R){case"m":e=l.filter((function(e){return"f"!==e.sex}));break;case"f":e=l.filter((function(e){return"m"!==e.sex}));break;default:e=Object(h.a)(l)}return q&&(e=e.filter((function(e){var t,c;return e.name.toLowerCase().includes(q)||(null===(t=e.motherName)||void 0===t?void 0:t.toLowerCase().includes(q))||(null===(c=e.fatherName)||void 0===c?void 0:c.toLowerCase().includes(q))}))),T.length&&(e=e.filter((function(e){var t=Math.ceil(e.born/100).toString();return T.includes(t)}))),e}(),errorMessage:p,isLoading:y,setPeopleList:j,isPeopleEmpty:C};return Object(o.jsx)(P.Provider,{value:U,children:c})},k=function(){return Object(o.jsx)("h1",{className:"title",children:"Home Page"})},C=[16,17,18,19,20],F=p.a.memo((function(){var e=Object(a.d)(),t=Object(n.a)(e,2),c=t[0],s=t[1],r=c.get("sex")||w,i=c.get("query")||"",j=c.getAll("centuries")||[],d=function(e){var t=new URLSearchParams(c);switch(e){case y:return t.set("sex","m"),t.toString();case S:return t.set("sex","f"),t.toString();default:return t.delete("sex"),t.toString()}},b=function(e){var t=new URLSearchParams(c);if(!e)return t.delete("centuries"),t.toString();var s=j.includes(e)?j.filter((function(t){return t!==e})):[].concat(Object(h.a)(j),[e]);return t.delete("centuries"),s.forEach((function(e){t.append("centuries",e)})),t.toString()};return Object(o.jsxs)("nav",{className:"panel",children:[Object(o.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(o.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(o.jsx)(a.b,{to:{search:d(w)},className:l()({"is-active":r===w}),children:"All"}),Object(o.jsx)(a.b,{to:{search:d(y)},className:l()({"is-active":"m"===r}),children:"Male"}),Object(o.jsx)(a.b,{to:{search:d(S)},className:l()({"is-active":"f"===r}),children:"Female"})]}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsxs)("p",{className:"control has-icons-left",children:[Object(o.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:i,onChange:function(e){var t=new URLSearchParams(c),a=e.currentTarget.value;if(t.has("query")&&!a)return t.delete("query"),void s(t);t.set("query",a),s(t)}}),Object(o.jsx)("span",{className:"icon is-left",children:Object(o.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(o.jsx)("div",{className:"level-left",children:C.map((function(e){return Object(o.jsx)(a.b,{"data-cy":"century",className:l()("button mr-1",{"is-info":j.includes(e.toString())}),to:{search:b(e.toString())},children:e},e)}))}),Object(o.jsx)("div",{className:"level-right ml-4",children:Object(o.jsx)(a.b,{"data-cy":"centuryALL",className:l()("button is-success is-outlined",{"is-hovered":!j.length}),to:{search:b()},children:"All"})})]})}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsx)(a.b,{className:"button is-link is-outlined is-fullwidth",to:{search:function(){var e=new URLSearchParams(c);return e.delete("centuries"),e.delete("sex"),e.delete("query"),e.toString()}()},children:"Reset all filters"})})]})})),M=(c(39),function(){return Object(o.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(o.jsx)("div",{className:"Loader__content"})})}),A=function(e){var t=e.person,c=t.mother,s=t.father,i=Object(r.r)().slug,j=Object(a.d)(),d=Object(n.a)(j,1)[0];return Object(o.jsxs)("tr",{"data-cy":"person",className:l()({"has-background-warning":i===t.slug}),children:[Object(o.jsx)("td",{children:Object(o.jsx)(a.b,{className:l()({"has-text-danger":"f"===t.sex}),to:{pathname:"/people/".concat(t.slug),search:d.toString()},children:t.name})}),Object(o.jsx)("td",{children:t.sex}),Object(o.jsx)("td",{children:t.born}),Object(o.jsx)("td",{children:t.died}),c?Object(o.jsx)("td",{children:Object(o.jsx)(a.b,{className:"has-text-danger",to:{pathname:"/people/".concat(c.slug),search:d.toString()},children:t.motherName})}):Object(o.jsx)("td",{children:t.motherName||"-"}),s?Object(o.jsx)("td",{children:Object(o.jsx)(a.b,{to:{pathname:"/people/".concat(s.slug),search:d.toString()},children:t.fatherName})}):Object(o.jsx)("td",{children:t.fatherName||"-"})]})};var E=function(){var e=Object(m.useContext)(P).filteredPeople,t=Object(a.d)(),c=Object(n.a)(t,1)[0],s=c.get("sort"),r=c.get("order"),i=function(e,t,c){var s=Object(h.a)(e);t&&s.sort((function(e,c){return"name"===t||"sex"===t?e[t].localeCompare(c[t]):"born"===t||"died"===t?e[t]-c[t]:0}));return c&&s.reverse(),s}(e,s,r),j=function(e){var t=new URLSearchParams(c);return s&&s!==e||s===e&&r?(t.delete("sort"),t.delete("order")):(t.set("sort",e),s!==e||r||t.set("order","desc")),t.toString()};return Object(o.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:Object(o.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(o.jsx)(a.b,{to:{search:j("name")},children:Object(o.jsx)("span",{className:"icon",children:Object(o.jsx)("i",{className:l()("fas fa-sort",{"fa-sort-up":"name"===s&&!r,"fa-sort-down":"name"===s&&r})})})})]})}),Object(o.jsx)("th",{children:Object(o.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(o.jsx)(a.b,{to:{search:j("sex")},children:Object(o.jsx)("span",{className:"icon",children:Object(o.jsx)("i",{className:l()("fas fa-sort",{"fa-sort-up":"sex"===s&&!r,"fa-sort-down":"sex"===s&&r})})})})]})}),Object(o.jsx)("th",{children:Object(o.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(o.jsx)(a.b,{to:{search:j("born")},children:Object(o.jsx)("span",{className:"icon",children:Object(o.jsx)("i",{className:l()("fas fa-sort",{"fa-sort-up":"born"===s&&!r,"fa-sort-down":"born"===s&&r})})})})]})}),Object(o.jsx)("th",{children:Object(o.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(o.jsx)(a.b,{to:{search:j("died")},children:Object(o.jsx)("span",{className:"icon",children:Object(o.jsx)("i",{className:l()("fas fa-sort",{"fa-sort-up":"died"===s&&!r,"fa-sort-down":"died"===s&&r})})})})]})}),Object(o.jsx)("th",{children:"Mother"}),Object(o.jsx)("th",{children:"Father"})]})}),Object(o.jsx)("tbody",{children:i.map((function(e){return Object(o.jsx)(A,{person:e},e.slug)}))})]})},R=function(){var e=Object(m.useContext)(P),t=e.filteredPeople,c=e.isLoading,s=e.errorMessage,a=e.isPeopleEmpty;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{className:"title",children:"People Page"}),Object(o.jsx)("div",{className:"block",children:Object(o.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[!c&&Object(o.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(o.jsx)(F,{})}),Object(o.jsx)("div",{className:"column",children:Object(o.jsxs)("div",{className:"box table-container",children:[c?Object(o.jsx)(M,{}):a?Object(o.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}):t.length>0?Object(o.jsx)(E,{}):Object(o.jsx)("p",{children:"There are no people matching the current search criteria"}),s&&Object(o.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"})]})})]})})]})},q=function(){return Object(o.jsx)("h1",{className:"title",children:"Page not found"})},T=function(){return Object(o.jsx)(a.a,{children:Object(o.jsx)(L,{children:Object(o.jsx)(r.e,{children:Object(o.jsxs)(r.c,{path:"/",element:Object(o.jsx)(b,{}),children:[Object(o.jsx)(r.c,{index:!0,element:Object(o.jsx)(k,{})}),Object(o.jsx)(r.c,{path:"home",element:Object(o.jsx)(r.a,{to:"/"})}),Object(o.jsxs)(r.c,{path:"people",children:[Object(o.jsx)(r.c,{index:!0,element:Object(o.jsx)(R,{})}),Object(o.jsx)(r.c,{path:":slug",element:Object(o.jsx)(R,{})})]}),Object(o.jsx)(r.c,{path:"*",element:Object(o.jsx)(q,{})})]})})})})};Object(s.createRoot)(document.getElementById("root")).render(Object(o.jsx)(T,{}))}},[[40,1,2]]]);
//# sourceMappingURL=main.5fea73c0.chunk.js.map